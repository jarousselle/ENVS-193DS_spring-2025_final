---
title: "ENVS 193DS Final"
author: "Jess Rousselle"
date: 2025-05-30
format:
  html:
    toc: true # use this to display a table of contents
---

<https://github.com/jarousselle/ENVS-193DS_spring-2025_final>

# Setup

```{r}
#| message: false
#| warning: false
setwd("/Users/jessrousselle/Desktop/github/ENVS-193DS_spring-2025_final")
library(tidyverse)
library(dplyr)
library(ggplot2)
library(janitor)
sst <- read.csv("data/SST_update2023.csv")
```

# Problem 1. Research writing

### a.Transparent statistical methods

In part 1, they used a linear regression. In part 2, they used an ANOVA test.

### b. More information needed

My co-worker should also include the results of a Tukey HSD test because this will explain which particular groups are actually different. In addition, they should also include the results of $\eta^2$ test to show the effect size, or the proportion of variation in the response that is explained by the predictor variable.

### c. Suggestions for rewriting

part 1: The annual total nitrogen load (increased/decreased) as distance from headwater increased (linear regression, F~Degrees of Freedom~ = test statistic, R^2^ = model fit, p = 0.03).

part 2: We found a (large/medium/small) difference ($\eta^2$ = effect size) between sources (urban land, atmospheric deposition, fertilizer, wastewater treatment, and grasslands) in mean nitrogen load (kg year-1) (one-way ANOVA, F(degrees of freedom) = test statistic, p = 0.02, $\alpha$ = significance level). On average, (source type) tended to have (higher/lower) nitrogen load than (source type) (results from Tukey HSD: average difference in nitrogen load, 95% CI)...(more comparisons between groups can be added based off of Tukey HSD test.)

# Problem 2. Data visualization
### a. Cleaning and summarizing
```{r}
sst_clean <- sst |> 
  mutate(year = year(date)) |> 
  filter(year == 2018 | year == 2019 | year == 2020 | year == 2021 | year == 2022 | year == 2023) |> 
 mutate(month = month(date, label = TRUE))
sst_clean$year <- factor(sst_clean$year)
sst_clean <- aggregate(temp ~ year + month, data = sst_clean, FUN = mean)
colnames(sst_clean) <- c("year", "month", "mean_monthly_sst")
slice_sample(sst_clean, n = 5)
str(sst_clean)
```

### b. Visualize the data

```{r}
#| message: false
#| warning: false
ggplot(sst_clean, aes(x = month,
                      y = mean_monthly_sst,
                      group = year,
                      color = year)) +
  scale_color_manual(values = c("#c9e6d9", "#aae6a1", "#5baa6f", "#2e8b37", "#1b773b", "#255c3f")) +
  geom_line() +
  geom_point() +
  theme(panel.border=element_rect(linetype=1,fill=NA),
        panel.background = element_blank(), 
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        legend.position = c(0.1, 0.75)) +
  labs(x = "Month",
       y = "Mean monthly sea surface temperature (°C)",
       color = "Year")
```

# Problem 3. Data analysis

### a. Response variable
